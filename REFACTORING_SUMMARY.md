# ğŸ”„ ä»£ç é‡æ„å®Œæˆæ€»ç»“

## é‡æ„ç›®æ ‡
å°†åŸæœ¬æ‚ä¹±çš„ `src/main/core` ç›®å½•é‡æ„ä¸ºæ¸…æ™°çš„å››å±‚æ¶æ„ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚

## âœ… é‡æ„å®Œæˆçš„å˜åŒ–

### ç›®å½•ç»“æ„å˜åŒ–

#### é‡æ„å‰ (é—®é¢˜)
```
src/main/
â”œâ”€â”€ core/                     # 9ä¸ªä¸åŒèŒè´£çš„æ–‡ä»¶æ··åœ¨ä¸€èµ·
â”‚   â”œâ”€â”€ ConsumerManager.ts    # é˜Ÿåˆ—æ¶ˆè´¹ç®¡ç†
â”‚   â”œâ”€â”€ configManager.ts      # é…ç½®ç®¡ç†  
â”‚   â”œâ”€â”€ persistentQueue.ts    # é˜Ÿåˆ—æŒä¹…åŒ–
â”‚   â”œâ”€â”€ price.ts             # ä»·æ ¼æŸ¥è¯¢
â”‚   â”œâ”€â”€ processManager.ts     # è¿›ç¨‹ç®¡ç†
â”‚   â”œâ”€â”€ producer.ts          # åŒºå—ç›‘æ§
â”‚   â”œâ”€â”€ queueProxy.ts        # é˜Ÿåˆ—ä»£ç†
â”‚   â”œâ”€â”€ tradeExecutor.ts     # äº¤æ˜“æ‰§è¡Œ
â”‚   â”œâ”€â”€ transactionProcessor.ts # äº¤æ˜“å¤„ç†
â”‚   â””â”€â”€ walletManager.ts     # é’±åŒ…ç®¡ç†
â”œâ”€â”€ utils/                   # å·¥å…·ç±»æ··åˆ
â”‚   â”œâ”€â”€ fetch.ts            # ç½‘ç»œè¯·æ±‚
â”‚   â”œâ”€â”€ logger.ts           # æ—¥å¿—ç³»ç»Ÿ
â”‚   â””â”€â”€ price.ts            # ä»·æ ¼æŸ¥è¯¢(é‡å¤)
â”œâ”€â”€ processes/              # å­è¿›ç¨‹é€»è¾‘
â”‚   â””â”€â”€ transactionProcess.ts
â”œâ”€â”€ ipcHandlers.ts          # IPCå¤„ç†
â””â”€â”€ update.ts              # åº”ç”¨æ›´æ–°
```

#### é‡æ„å (æ¸…æ™°çš„å››å±‚æ¶æ„)
```
src/main/
â”œâ”€â”€ app/                    # ğŸ—ï¸  åº”ç”¨å±‚
â”‚   â”œâ”€â”€ index.ts           #     ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ ipcHandlers.ts     #     IPCå¤„ç†å™¨
â”‚   â””â”€â”€ update.ts          #     ç¨‹åºæ›´æ–°
â”œâ”€â”€ modules/               # ğŸ¯  ä¸šåŠ¡æ¨¡å—å±‚  
â”‚   â”œâ”€â”€ index.ts           #     ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ trading/           #     äº¤æ˜“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ index.ts       #       ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ tradeExecutor.ts #     äº¤æ˜“æ‰§è¡Œ
â”‚   â”‚   â””â”€â”€ walletManager.ts #     é’±åŒ…ç®¡ç†
â”‚   â”œâ”€â”€ monitoring/        #     ç›‘æ§æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ index.ts       #       ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ producer.ts    #       åŒºå—ç›‘æ§
â”‚   â”‚   â””â”€â”€ transactionProcessor.ts # äº¤æ˜“å¤„ç†
â”‚   â”œâ”€â”€ queue/             #     é˜Ÿåˆ—æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ index.ts       #       ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ ConsumerManager.ts #   æ¶ˆè´¹è€…ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ persistentQueue.ts #   é˜Ÿåˆ—æŒä¹…åŒ–
â”‚   â”‚   â””â”€â”€ queueProxy.ts  #       é˜Ÿåˆ—ä»£ç†
â”‚   â””â”€â”€ process/           #     è¿›ç¨‹æ¨¡å—
â”‚       â”œâ”€â”€ index.ts       #       ç»Ÿä¸€å¯¼å‡º
â”‚       â”œâ”€â”€ processManager.ts #    è¿›ç¨‹ç®¡ç†
â”‚       â””â”€â”€ transactionProcess.ts # å­è¿›ç¨‹é€»è¾‘
â”œâ”€â”€ infrastructure/        # ğŸ”§  åŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ index.ts           #     ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ config/            #     é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.ts       #       ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â””â”€â”€ configManager.ts #     é…ç½®ç®¡ç†å™¨
â”‚   â”œâ”€â”€ network/           #     ç½‘ç»œå±‚
â”‚   â”‚   â”œâ”€â”€ index.ts       #       ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ fetch.ts       #       ç½‘ç»œè¯·æ±‚
â”‚   â”‚   â””â”€â”€ price.ts       #       ä»·æ ¼æŸ¥è¯¢
â”‚   â””â”€â”€ logging/           #     æ—¥å¿—ç³»ç»Ÿ
â”‚       â”œâ”€â”€ index.ts       #       ç»Ÿä¸€å¯¼å‡º
â”‚       â””â”€â”€ logger.ts      #       æ—¥å¿—å™¨
â”œâ”€â”€ shared/                # ğŸ”—  å…±äº«å±‚
â”‚   â””â”€â”€ types/             #     ç±»å‹å®šä¹‰(å¾…æ‰©å±•)
â””â”€â”€ README.md              # ğŸ“–  æ¶æ„è¯´æ˜æ–‡æ¡£
```

## ğŸ¯ é‡æ„ä¼˜åŠ¿

### 1. æ¸…æ™°çš„åˆ†å±‚æ¶æ„
- **åº”ç”¨å±‚**: å¤„ç† IPC é€šä¿¡å’Œç¨‹åºç”Ÿå‘½å‘¨æœŸ
- **ä¸šåŠ¡æ¨¡å—å±‚**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡
- **åŸºç¡€è®¾æ–½å±‚**: æä¾›åŸºç¡€æœåŠ¡æ”¯æŒ
- **å…±äº«å±‚**: å…¬å…±ç±»å‹å®šä¹‰å’Œå·¥å…·

### 2. é™ä½æ¨¡å—é—´è€¦åˆåº¦
- æ¯ä¸ªæ¨¡å—æœ‰æ˜ç¡®çš„èŒè´£è¾¹ç•Œ
- é€šè¿‡ index.ts ç»Ÿä¸€å¯¼å‡ºï¼Œéšè—å†…éƒ¨å®ç°
- ä¾èµ–å…³ç³»æ¸…æ™°ï¼šä¸Šå±‚ä¾èµ–ä¸‹å±‚ï¼ŒåŒå±‚æ¨¡å—ç›¸å¯¹ç‹¬ç«‹

### 3. æé«˜å¯ç»´æŠ¤æ€§
- æ–‡ä»¶ä½ç½®ä¸€ç›®äº†ç„¶ï¼Œæ˜“äºå®šä½
- æ–°åŠŸèƒ½æ·»åŠ æœ‰æ˜ç¡®çš„å½’å±ä½ç½®
- ä¾¿äºå•å…ƒæµ‹è¯•å’Œæ¨¡å—åŒ–å¼€å‘

### 4. ç»Ÿä¸€çš„å¯¼å…¥å¯¼å‡ºæ¨¡å¼
- æ¯ä¸ªæ¨¡å—éƒ½æœ‰ index.ts ä½œä¸ºç»Ÿä¸€å…¥å£
- ç®€åŒ–å¯¼å…¥è·¯å¾„ï¼Œæé«˜ä»£ç å¯è¯»æ€§
- ä¾¿äºé‡æ„æ—¶çš„æ‰¹é‡ä¿®æ”¹

## ğŸ”§ ä¸»è¦ä¿®æ”¹å†…å®¹

### æ–‡ä»¶ç§»åŠ¨å’Œé‡ç»„ç»‡
1. **åº”ç”¨å±‚æ–‡ä»¶**
   - `ipcHandlers.ts` â†’ `app/ipcHandlers.ts`
   - `update.ts` â†’ `app/update.ts`

2. **ä¸šåŠ¡æ¨¡å—é‡ç»„**
   - äº¤æ˜“ç›¸å…³: `tradeExecutor.ts`, `walletManager.ts` â†’ `modules/trading/`
   - ç›‘æ§ç›¸å…³: `producer.ts`, `transactionProcessor.ts` â†’ `modules/monitoring/`
   - é˜Ÿåˆ—ç›¸å…³: `ConsumerManager.ts`, `persistentQueue.ts`, `queueProxy.ts` â†’ `modules/queue/`
   - è¿›ç¨‹ç›¸å…³: `processManager.ts`, `transactionProcess.ts` â†’ `modules/process/`

3. **åŸºç¡€è®¾æ–½é‡ç»„**
   - é…ç½®ç®¡ç†: `configManager.ts` â†’ `infrastructure/config/`
   - ç½‘ç»œå±‚: `fetch.ts`, `price.ts` â†’ `infrastructure/network/`
   - æ—¥å¿—ç³»ç»Ÿ: `logger.ts` â†’ `infrastructure/logging/`

### å¯¼å…¥è·¯å¾„æ›´æ–°
æ‰€æœ‰æ–‡ä»¶çš„å¯¼å…¥è·¯å¾„å·²æ›´æ–°ä¸ºæ–°çš„æ¨¡å—ç»“æ„ï¼š
```typescript
// æ—§çš„å¯¼å…¥æ–¹å¼
import { configManager } from './configManager';
import { appLogger } from '../utils/logger';

// æ–°çš„å¯¼å…¥æ–¹å¼  
import { configManager } from '../../infrastructure/config';
import { appLogger } from '../../infrastructure/logging';
```

### ç»Ÿä¸€å¯¼å‡ºæ–‡ä»¶
ä¸ºæ¯ä¸ªæ¨¡å—åˆ›å»ºäº† `index.ts` æ–‡ä»¶ï¼Œæä¾›ç»Ÿä¸€çš„å¯¼å‡ºæ¥å£ï¼š
```typescript
// modules/trading/index.ts
export { followUpBuy, initializeTradeExecutor } from './tradeExecutor';
export { walletManager } from './walletManager';
```

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

### 1. æ‰©å±•å…±äº«å±‚
- æ·»åŠ é€šç”¨ç±»å‹å®šä¹‰åˆ° `shared/types/`
- æ·»åŠ å·¥å…·å‡½æ•°åˆ° `shared/utils/`
- æ·»åŠ å¸¸é‡å®šä¹‰åˆ° `shared/constants/`

### 2. å®Œå–„å•å…ƒæµ‹è¯•
- æŒ‰æ¨¡å—ç»„ç»‡æµ‹è¯•æ–‡ä»¶
- åˆ©ç”¨æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œç¼–å†™ç‹¬ç«‹æµ‹è¯•
- æ·»åŠ æ¨¡å—é—´é›†æˆæµ‹è¯•

### 3. æ·»åŠ æ–‡æ¡£
- ä¸ºæ¯ä¸ªæ¨¡å—æ·»åŠ  README.md
- å®Œå–„ API æ–‡æ¡£
- æ·»åŠ æ¶æ„å†³ç­–è®°å½•(ADR)

## âœ… éªŒè¯é‡æ„æˆåŠŸ

é‡æ„å·²ç»æˆåŠŸå®Œæˆï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½å·²ç§»åŠ¨åˆ°æ­£ç¡®ä½ç½®ï¼Œå¯¼å…¥è·¯å¾„å·²æ›´æ–°ï¼Œæ¨¡å—å¯¼å‡ºé…ç½®æ­£ç¡®ã€‚åº”ç”¨ç¨‹åºå¯ä»¥æ­£å¸¸æ„å»ºå’Œè¿è¡Œã€‚

---

**é‡æ„å®Œæˆæ—¶é—´**: $(date)  
**å½±å“æ–‡ä»¶æ•°**: 20+ ä¸ªæ–‡ä»¶  
**æ–°å¢æ¨¡å—**: 4 ä¸ªä¸»è¦æ¨¡å—ï¼Œ12+ ä¸ªå­æ¨¡å—  
**æ¶æ„æ”¹è¿›**: ä»å•ä¸€ç›®å½•æ··åˆ â†’ æ¸…æ™°çš„å››å±‚æ¶æ„ 