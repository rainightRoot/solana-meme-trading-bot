# ä¸»è¿›ç¨‹æ¨¡å—æ¶æ„é‡æ„

## ğŸ“ æ–°çš„ç›®å½•ç»“æ„

```
src/main/
â”œâ”€â”€ app/                         # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ ipcHandlers.ts          # IPC é€šä¿¡å¤„ç†
â”‚   â”œâ”€â”€ update.ts               # åº”ç”¨æ›´æ–°é€»è¾‘
â”‚   â””â”€â”€ index.ts                # åº”ç”¨å±‚ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ modules/                     # ä¸šåŠ¡æ¨¡å—å±‚
â”‚   â”œâ”€â”€ trading/                # äº¤æ˜“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ tradeExecutor.ts    # äº¤æ˜“æ‰§è¡Œå™¨
â”‚   â”‚   â”œâ”€â”€ walletManager.ts    # é’±åŒ…ç®¡ç†
â”‚   â”‚   â””â”€â”€ index.ts            # äº¤æ˜“æ¨¡å—å¯¼å‡º
â”‚   â”œâ”€â”€ monitoring/             # ç›‘æ§æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ producer.ts         # åŒºå—ç”Ÿäº§è€…
â”‚   â”‚   â”œâ”€â”€ transactionProcessor.ts # äº¤æ˜“å¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ index.ts            # ç›‘æ§æ¨¡å—å¯¼å‡º
â”‚   â”œâ”€â”€ queue/                  # é˜Ÿåˆ—æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ persistentQueue.ts  # æŒä¹…åŒ–é˜Ÿåˆ—
â”‚   â”‚   â”œâ”€â”€ queueProxy.ts       # é˜Ÿåˆ—ä»£ç†
â”‚   â”‚   â”œâ”€â”€ ConsumerManager.ts  # æ¶ˆè´¹è€…ç®¡ç†
â”‚   â”‚   â””â”€â”€ index.ts            # é˜Ÿåˆ—æ¨¡å—å¯¼å‡º
â”‚   â”œâ”€â”€ process/                # è¿›ç¨‹æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ processManager.ts   # è¿›ç¨‹ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ transactionProcess.ts # å­è¿›ç¨‹å¤„ç†é€»è¾‘
â”‚   â”‚   â””â”€â”€ index.ts            # è¿›ç¨‹æ¨¡å—å¯¼å‡º
â”‚   â””â”€â”€ index.ts                # ä¸šåŠ¡æ¨¡å—ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ infrastructure/             # åŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ config/                 # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ configManager.ts    # é…ç½®ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ index.ts            # é…ç½®æ¨¡å—å¯¼å‡º
â”‚   â”œâ”€â”€ network/                # ç½‘ç»œç›¸å…³
â”‚   â”‚   â”œâ”€â”€ fetch.ts            # ç½‘ç»œè¯·æ±‚å·¥å…·
â”‚   â”‚   â”œâ”€â”€ price.ts            # ä»·æ ¼æŸ¥è¯¢
â”‚   â”‚   â””â”€â”€ index.ts            # ç½‘ç»œæ¨¡å—å¯¼å‡º
â”‚   â”œâ”€â”€ logging/                # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ logger.ts           # æ—¥å¿—å·¥å…·
â”‚   â”‚   â””â”€â”€ index.ts            # æ—¥å¿—æ¨¡å—å¯¼å‡º
â”‚   â””â”€â”€ index.ts                # åŸºç¡€è®¾æ–½ç»Ÿä¸€å¯¼å‡º
â””â”€â”€ shared/                     # å…±äº«å±‚
    â”œâ”€â”€ types/                  # ç±»å‹å®šä¹‰ (å¾…æ‰©å±•)
    â”œâ”€â”€ constants/              # å¸¸é‡å®šä¹‰ (å¾…æ‰©å±•)
    â””â”€â”€ utils/                  # é€šç”¨å·¥å…· (å¾…æ‰©å±•)
```

## ğŸ¯ æ¨¡å—èŒè´£

### **åº”ç”¨å±‚ (app/)**
- **èŒè´£**: åº”ç”¨ç¨‹åºå…¥å£å’Œé¡¶å±‚é€»è¾‘
- **åŒ…å«**: IPC å¤„ç†ã€åº”ç”¨æ›´æ–°ã€ç¨‹åºç”Ÿå‘½å‘¨æœŸç®¡ç†

### **ä¸šåŠ¡æ¨¡å—å±‚ (modules/)**
- **trading**: äº¤æ˜“ç›¸å…³åŠŸèƒ½ (é’±åŒ…ã€æ‰§è¡Œå™¨)
- **monitoring**: ç›‘æ§ç›¸å…³åŠŸèƒ½ (ç”Ÿäº§è€…ã€å¤„ç†å™¨)
- **queue**: é˜Ÿåˆ—ç³»ç»Ÿ (æŒä¹…åŒ–ã€ä»£ç†ã€æ¶ˆè´¹è€…)
- **process**: è¿›ç¨‹ç®¡ç† (å­è¿›ç¨‹ã€ä»»åŠ¡è°ƒåº¦)

### **åŸºç¡€è®¾æ–½å±‚ (infrastructure/)**
- **config**: é…ç½®ç®¡ç†
- **network**: ç½‘ç»œè¯·æ±‚å’Œä»·æ ¼æŸ¥è¯¢
- **logging**: æ—¥å¿—ç³»ç»Ÿ

### **å…±äº«å±‚ (shared/)**
- **types**: å…¬å…±ç±»å‹å®šä¹‰
- **constants**: å¸¸é‡
- **utils**: é€šç”¨å·¥å…·å‡½æ•°

## ğŸš€ é‡æ„ä¼˜åŠ¿

### **1. æ¸…æ™°çš„åˆ†å±‚æ¶æ„**
- æŒ‰ç…§ä¸šåŠ¡åŠŸèƒ½å’ŒæŠ€æœ¯é¢†åŸŸåˆ†ç»„
- é™ä½æ¨¡å—é—´çš„è€¦åˆåº¦
- æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§

### **2. ç»Ÿä¸€çš„å¯¼å…¥å¯¼å‡º**
```typescript
// é‡æ„å‰ - åˆ†æ•£çš„å¯¼å…¥
import { configManager } from './core/configManager';
import { tradeExecutor } from './core/tradeExecutor';
import { ConsumerManager } from './core/ConsumerManager';

// é‡æ„å - æ¸…æ™°çš„æ¨¡å—å¯¼å…¥
import { configManager } from './infrastructure/config';
import { tradeExecutor } from './modules/trading';
import { ConsumerManager } from './modules/queue';
```

### **3. æ›´å¥½çš„ä»£ç ç»„ç»‡**
- ç›¸å…³åŠŸèƒ½èšåˆåœ¨ä¸€èµ·
- ä¾¿äºæ–°åŠŸèƒ½çš„æ·»åŠ å’Œæ‰©å±•
- ä¾¿äºå•å…ƒæµ‹è¯•å’Œæ¨¡å—æµ‹è¯•

### **4. ç¬¦åˆä¼ä¸šçº§æ¶æ„**
- åˆ†å±‚æ¶æ„æ¨¡å¼
- é¢†åŸŸé©±åŠ¨è®¾è®¡æ€æƒ³
- ä¾¿äºå›¢é˜Ÿåä½œå¼€å‘

## ğŸ“ å¯¼å…¥è·¯å¾„è¿ç§»æŒ‡å—

### **æ—§è·¯å¾„ â†’ æ–°è·¯å¾„**
```typescript
// é…ç½®ç®¡ç†
'./core/configManager' â†’ './infrastructure/config'

// äº¤æ˜“ç›¸å…³
'./core/tradeExecutor' â†’ './modules/trading'
'./core/walletManager' â†’ './modules/trading'

// ç›‘æ§ç›¸å…³
'./core/producer' â†’ './modules/monitoring'
'./core/transactionProcessor' â†’ './modules/monitoring'

// é˜Ÿåˆ—ç›¸å…³
'./core/ConsumerManager' â†’ './modules/queue'
'./core/persistentQueue' â†’ './modules/queue'
'./core/queueProxy' â†’ './modules/queue'

// è¿›ç¨‹ç›¸å…³
'./core/processManager' â†’ './modules/process'
'./processes/transactionProcess' â†’ './modules/process'

// åŸºç¡€è®¾æ–½
'./utils/logger' â†’ './infrastructure/logging'
'./utils/fetch' â†’ './infrastructure/network'
'./utils/price' â†’ './infrastructure/network'

// åº”ç”¨å±‚
'./ipcHandlers' â†’ './app'
'./update' â†’ './app'
```

## âš ï¸ å¾…å®Œæˆçš„å·¥ä½œ

1. **ä¿®å¤æ‰€æœ‰æ–‡ä»¶çš„å¯¼å…¥è·¯å¾„**
2. **æ›´æ–°æ„å»ºé…ç½®ä¸­çš„è·¯å¾„å¼•ç”¨**
3. **å®Œå–„å…±äº«å±‚çš„ç±»å‹å®šä¹‰**
4. **æ·»åŠ å„æ¨¡å—çš„å•å…ƒæµ‹è¯•**
5. **æ›´æ–°æ–‡æ¡£å’Œæ³¨é‡Š**

è¿™ä¸ªé‡æ„ä½¿ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ï¼ 